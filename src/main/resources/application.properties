# Kích hoạt profile 'local' làm mặc định khi chạy trên máy cá nhân
spring.profiles.active=local
spring.application.name=BookStation

# ===================================================================
#  DATABASE CONFIGURATION (PostgreSQL for Production/Deploy)
# ===================================================================
# Sử dụng biến môi trường DATABASE_URL do nền tảng deploy (Render) cung cấp
spring.datasource.url=${DATABASE_URL}
# Spring Boot sẽ tự động nhận diện dialect, không cần khai báo


# ===================================================================
#  JPA/HIBERNATE GENERAL SETTINGS
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.generate-ddl=true
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=never
spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# ===================================================================
#  POSTGRESQL CONFIGURATION
# ===================================================================
# Tắt auto-commit để hỗ trợ transaction management với PostgreSQL
spring.jpa.properties.hibernate.connection.autocommit=false
spring.jpa.properties.hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory

# Đảm bảo encoding UTF-8 cho tiếng Việt
spring.datasource.hikari.connection-init-sql=SET CLIENT_ENCODING TO 'UTF8'
spring.jpa.properties.hibernate.jdbc.charset=UTF-8


# ===================================================================
#  JWT & FILE UPLOAD CONFIGURATION
# ===================================================================
# Sử dụng biến môi trường hoặc giá trị mặc định
jwt.secret=${JWT_SECRET:BookStation}
jwt.expiration=${JWT_EXPIRATION:86400000}

spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=25MB
upload.path=uploads/
# URL cơ sở sẽ được cung cấp bởi biến môi trường của server deploy
upload.base-url=${APP_BASE_URL}/uploads/

# ===================================================================
#  FRONTEND URL CONFIGURATION
# ===================================================================
# URL của frontend application
frontend.url=${FRONTEND_URL:http://localhost:5173}






# ===================================================================
#  VNPAY CONFIGURATION (Sử dụng biến môi trường)
# ===================================================================
vnpay.tmnCode=${VNPAY_TMN_CODE}
vnpay.hashSecret=${VNPAY_HASH_SECRET}
vnpay.payUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
# URL trả về sẽ là domain của website đã deploy
vnpay.returnUrl=${APP_BASE_URL}/api/payment/vnpay-return
vnpay.ipnUrl=${APP_BASE_URL}/api/payment/vnpay-ipn


# ===================================================================
#  LOGGING & ERROR CONFIGURATION
# ===================================================================
logging.level.root=ERROR
logging.level.org.datn.bookstation=INFO
logging.level.org.springframework.web.servlet.DispatcherServlet=ERROR
server.error.include-message=always
server.error.include-stacktrace=never